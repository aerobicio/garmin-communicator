box: wercker/nodejs
build:
  steps:
    - wercker/npm-install@0.9.3
    - script:
        name: Spec
        code: make spec
    - script:
        name: Coverage report
        code: make coverage_report
    - script:
        name: Build distribution
        code: |
          make dist
  after-steps:
    - script:
        name: Save Artifacts
        code: |
          cp -R garmin.js $WERCKER_REPORT_ARTIFACTS_DIR
          cp -R garmin.min.js $WERCKER_REPORT_ARTIFACTS_DIR
          cp -R coverage $WERCKER_REPORT_ARTIFACTS_DIR
    - wercker/campfire-notify@0.1.1:
        token: $CAMPFIRE_TOKEN
        room-id: 541059
        subdomain: aerobicio
        on: failed
